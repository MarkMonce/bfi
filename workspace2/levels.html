<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aligned Timeline</title>
    <style>
        .body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            height: 100vh;
            margin: 0;
            padding: 0;
        }

        .lev1 {
            display: flex;
            height: 15vh;
            width: 100%;
            border: 1px solid black;
        }

        .lev2 {
            display: flex;
            height: 12.5vh;
            width: 50vw;
            border: 1px solid black;
            margin: 0 auto;
            justify-content: space-between;
        }

        .l2Left {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 12.5vh;
            width: 20%;
            border: 1px solid black;
        }

        .l2Right {
            display: flex;
            flex-direction: column;
            height: 12.5vh;
            width: 80%;
            border: 1px solid rgb(92, 90, 90);
            position: relative;
        }

        .line {
            position: relative;
            margin-top: 4vh;
            margin-bottom: 2vh;
            height: 2px;
            width: 100%;
            background-color: rgb(68, 65, 65);
        }

        .circle {
            position: absolute;
            height: 15px;
            width: 15px;
            border-radius: 50%;
            background-color: rgb(74, 74, 179);
            top: -6.5px;
            transform: translateX(-50%);
        }

        table {
            border: none;
            border-collapse: collapse;
            width: 100%;
        }

        td {
            width: calc(100% / 12);
            height: 2.5vh;
            font-family: sans-serif;
            font-size: xx-small;
            text-align: center;
        }

        .bottom-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            margin-top: auto;
            padding: 10px;
            background-color: #f9f9f9;
            border-top: 1px solid #ccc;
        }

        .bottom-controls input, .bottom-controls button {
            margin: 5px;
            padding: 10px;
            font-size: 1rem;
        }

        .bottom-controls input {
            width: 50%;
        }
    </style>
</head>
<body class="body">
    <div class="lev1">
        Level 1
    </div>
    <div class="lev2">
        <div class="l2Left">Status Legend</div>
        <div class="l2Right">
            <div class="line" id="timeline"></div>
            <div class="label-table">
                <table>
                    <tr>
                        <td>Jan-42</td>
                        <td>Feb-42</td>
                        <td>Mar-42</td>
                        <td>Apr-42</td>
                        <td>May-42</td>
                        <td>Jun-42</td>
                        <td>Jul-42</td>
                        <td>Aug-42</td>
                        <td>Sep-42</td>
                        <td>Oct-42</td>
                        <td>Nov-42</td>
                        <td>Dec-42</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="bottom-controls">
        <input type="text" id="monthInput" placeholder="Enter month-year (e.g., Nov-42)" />
        <input type="text" id="codeInput" placeholder="Enter event code" />
        <button id="new_event">Add Event</button>
    </div>
    <script>
        // document.addEventListener('DOMContentLoaded', () => {
        //     const timeline = document.querySelector(".line");
        //     const table = document.querySelector("table tr");

        //     const monthMap = {
        //         "Jan-42": 0, "Feb-42": 1, "Mar-42": 2, "Apr-42": 3,
        //         "May-42": 4, "Jun-42": 5, "Jul-42": 6, "Aug-42": 7,
        //         "Sep-42": 8, "Oct-42": 9, "Nov-42": 10, "Dec-42": 11
        //     };

        //     const newEventButton = document.getElementById('new_event');
        //     const monthInput = document.getElementById('monthInput');
        //     const codeInput = document.getElementById('codeInput');

        //     if (newEventButton) {
        //         newEventButton.addEventListener('click', () => {
        //             const monthYear = monthInput.value.trim();
        //             const eventCode = codeInput.value.trim();

        //             if (!monthMap.hasOwnProperty(monthYear)) {
        //                 alert('Please enter a valid month-year (e.g., Nov-42).');
        //                 return;
        //             }

        //             if (!eventCode) {
        //                 alert('Please enter an event code.');
        //                 return;
        //             }

        //             const columnIndex = monthMap[monthYear];
        //             const column = table.children[columnIndex];
        //             const columnWidth = timeline.getBoundingClientRect().width / 12;
        //             const positionInPixels = columnWidth * columnIndex + columnWidth / 2;

        //             const newCircle = document.createElement("div");
        //             newCircle.classList.add("circle");
        //             newCircle.setAttribute("title", eventCode);
        //             newCircle.style.left = `${positionInPixels}px`;
        //             timeline.appendChild(newCircle);
        //         });
        //     }
        // });
        document.addEventListener('DOMContentLoaded', () => {
            const timeline = document.querySelector(".line");
            const table = document.querySelector("table tr");

            const monthMap = {
                "Jan-42": 0, "Feb-42": 1, "Mar-42": 2, "Apr-42": 3,
                "May-42": 4, "Jun-42": 5, "Jul-42": 6, "Aug-42": 7,
                "Sep-42": 8, "Oct-42": 9, "Nov-42": 10, "Dec-42": 11
            };

            const newEventButton = document.getElementById('new_event');
            const monthInput = document.getElementById('monthInput');
            const codeInput = document.getElementById('codeInput');
            const circles = [];

            function repositionCircles() {
                const timelineWidth = timeline.getBoundingClientRect().width;
                const columnWidth = timelineWidth / 12;

                circles.forEach(circle => {
                    const { columnIndex, element } = circle;
                    const positionInPixels = columnWidth * columnIndex + columnWidth / 2;
                    element.style.left = `${positionInPixels}px`;
                });
            }

            if (newEventButton) {
                newEventButton.addEventListener('click', () => {
                    const monthYear = monthInput.value.trim();
                    const eventCode = codeInput.value.trim();

                    if (!monthMap.hasOwnProperty(monthYear)) {
                        alert('Please enter a valid month-year (e.g., Nov-42).');
                        return;
                    }

                    if (!eventCode) {
                        alert('Please enter an event code.');
                        return;
                    }

                    const columnIndex = monthMap[monthYear];
                    const columnWidth = timeline.getBoundingClientRect().width / 12;
                    const positionInPixels = columnWidth * columnIndex + columnWidth / 2;

                    const newCircle = document.createElement("div");
                    newCircle.classList.add("circle");
                    newCircle.setAttribute("title", eventCode);
                    newCircle.style.left = `${positionInPixels}px`;
                    timeline.appendChild(newCircle);

                    // Store circle information for repositioning on resize
                    circles.push({ columnIndex, element: newCircle });
                });
            }

            // Reposition circles on window resize
            window.addEventListener('resize', repositionCircles);
        });

    </script>
</body>
</html>
